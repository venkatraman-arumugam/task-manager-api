<source>
  @type forward
  port 24224
</source>

# Tag-based matching
<match redis>
  @type stdout
  @id redis-logs
</match>

<match flask>
  @type stdout
  @id flask-logs
</match>

<match celery>
  @type stdout
  @id celery-logs
</match>

# Send logs to Elasticsearch
<match **>
  @type copy
  <store>
    @type file
    path /fluentd/log/taskmanager
    compress gzip
    <format>
      localtime false
    </format>
    <buffer time>
      timekey_wait 10m
      timekey 86400
      timekey_use_utc true
      path /fluentd/log/taskmanager
    </buffer>
    <inject>
      time_format %Y%m%dT%H%M%S%z
      localtime false
    </inject>
    </store>
   </match>
